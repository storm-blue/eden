# 命令系统快速使用指南

## 🎯 快速开始

### 第一步：启动服务
```bash
# 启动后端（在eden-server目录）
cd eden-server
./mvnw spring-boot:run

# 启动前端（在eden-web目录，新终端）
cd eden-web
npm run dev
```

### 第二步：登录并进入星星城
1. 打开浏览器访问 `http://localhost:5173`
2. 输入姓名"秦小淮"登录
3. 点击右上角"🏰 星星城"按钮进入星星城

### 第三步：颁布命令
1. 在星星城页面左上角，你会看到"📜 颁布命令"按钮
2. 点击按钮打开命令管理弹窗
3. 选择"不得靠近城堡"命令
4. 点击"颁布命令"按钮

### 第四步：查看效果
- 城堡中除李星斗之外的所有人都被驱逐了
- 存子回到行宫
- 小白鸽回到小白鸽家
- 其他用户也回到各自的指定居所

### 第五步：取消命令
1. 再次打开命令管理弹窗
2. 此时"不得靠近城堡"显示为已激活状态（金色边框）
3. 点击"取消命令"按钮
4. 命令效果立即失效

## 🧪 测试脚本

如果你想通过API直接测试：
```bash
chmod +x test-decree.sh
./test-decree.sh
```

## 🎮 命令效果演示

### 颁布"不得靠近城堡"命令前
```
城堡：李星斗、秦小淮、存子
行宫：大祭司
小白鸽家：小白鸽、白婆婆
市政厅：严伯升
公园：（空）
```

### 颁布命令后
```
城堡：李星斗（只剩李星斗！）
行宫：大祭司、存子（存子被驱逐回行宫）
小白鸽家：小白鸽、白婆婆
市政厅：严伯升
公园：（空）
```

### 命令生效期间
- 所有用户漫游时都不能选择城堡作为目标
- 只有李星斗可以继续居住在城堡
- 用户主动居住选择也无法选择城堡（需要在前端额外实现）

## ⚠️ 注意事项

1. **只有秦小淮可以使用**：其他用户在星星城看不到命令按钮
2. **立即生效**：颁布命令后效果立即执行，无需等待
3. **持续限制**：命令取消前会一直生效
4. **自动刷新**：驱逐后相关居所的事件会自动更新

## 🚀 下一步

你可以：
- 尝试颁布和取消命令
- 观察用户漫游时的行为变化
- 在 `DECREE_SYSTEM.md` 中查看完整文档
- 添加新的命令类型（参考扩展指南）

## 💡 提示

如果想验证命令是否真正阻止了漫游：
1. 颁布"不得靠近城堡"命令
2. 等待系统自动漫游（每2小时一次）
3. 观察是否有用户移动到城堡（应该没有）
4. 或者使用测试API触发漫游：
   ```bash
   curl -X POST "http://localhost:8080/api/admin/trigger-roaming?adminUserId=秦小淮"
   ```

祝使用愉快！🎉

